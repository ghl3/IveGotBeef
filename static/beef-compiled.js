$(document).ready(function(){$("#VoteLeft").live("click",vote_for);$("#VoteRight").live("click",vote_against)});function vote_for(){vote("for")}function vote_against(){vote("against")}
function vote(e){$("#Result").html("").hide();var d=getURLParameter("_id");if(null==d)return console.log("A weird error occured, certainly there should be an id in the url"),!1;$.post("/api/vote_for",{beef_id:d,vote_for:e},function(a){if(0!=a.flag)return console.log("Error: Failed to cast vote"),!1;var b=parseFloat($("#VotesTotalLeft").html()),c=parseFloat($("#VotesTotalRight").html());console.log("Initial votes for: "+b);console.log("Initial votes against: "+c);if("nothing"==a.action)return console.log("Result: Do nothing."),
!1;if("increment_for"==a.action)return console.log("Incrementing the vote 'for'."),$("#VotesTotalLeft").html(b+1),!1;if("increment_against"==a.action)return console.log("Incrementing the vote 'against'."),$("#VotesTotalRight").html(c+1),!1;if("swap_to_for"==a.action)console.log("Swapping vote to 'for'."),$("#VotesTotalLeft").html(b+1),$("#VotesTotalRight").html(c-1);else if("swap_to_against"==a.action)console.log("Swapping vote to 'against'."),$("#VotesTotalRight").html(c+1),$("#VotesTotalLeft").html(b-
1);else return console.log("Error: An unknown control flow occured"),!1}).error(function(){console.log("Error callback: Database query failed");$("#Result").html("Database error: Vote not cast. Please try again").show()})};
